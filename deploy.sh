#!/bin/bash

# 1. –°–±–æ—Ä–∫–∞
echo "üîß –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
npm run build

# 2. –£–ø–∞–∫–æ–≤–∫–∞ dist –≤ –∞—Ä—Ö–∏–≤
echo "üì¶ –ê—Ä—Ö–∏–≤–∏—Ä—É–µ–º dist..."
tar -czf dist.tar.gz dist

# 3. –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
echo "üßπ –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ..."
ssh ubuntu@51.21.75.162 'rm -rf /home/ubuntu/dist /home/ubuntu/dist.tar.gz'

# 4. –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ä—Ö–∏–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
echo "üöÄ –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ä—Ö–∏–≤..."
scp dist.tar.gz ubuntu@51.21.75.162:/home/ubuntu/

# 5. –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∞—Ä—Ö–∏–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
echo "üìÇ –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∞—Ä—Ö–∏–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ..."
ssh ubuntu@51.21.75.162 'tar -xzf /home/ubuntu/dist.tar.gz -C /home/ubuntu && rm /home/ubuntu/dist.tar.gz'

# 6. –£–¥–∞–ª—è–µ–º –∞—Ä—Ö–∏–≤ –ª–æ–∫–∞–ª—å–Ω–æ
rm dist.tar.gz

echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª—ë–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ."
